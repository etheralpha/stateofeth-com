<style type="text/css">
  #overview .table th:first-child,
  #overview .table td:first-child {
    position: unset; /*undoes the sticky first column*/
  }
  #overview td.metric {
    padding-top: 0.625rem;
  }
  #overview th.metric,
  #overview td.metric {
    width: 300px;
    min-width: 260px;
    max-width: 300px;
  }
  #overview td.health > div {
    /*padding-top: 1.03rem;*/
    margin-top: 0.5rem
  }
  #overview th.health,
  #overview td.health {
    /*width: 600px;*/
  }
  #overview td.health > div {
    min-width: 200px;
  }
  #overview th.details,
  #overview td.details {
    width: 134px;
    min-width: 134px;
    max-width: 134px;
  }
  #overview .sort svg {
    margin-top: -3px;
  }
</style>

{%- capture content -%}
{% include components/card-alert.html
  title="Health"
  body="This is test data, it is not representative of the real data."
  type="warning"
%}

<div id="overview" class="table-responsive card">
  <table class="table">
    <thead>
      <tr>
        <th>Metric</th>
        <th>
          Health
          <span class="sort">{{site.data.icons.sort}}</span>
        </th>
        <th class="details"></th>
      </tr>
    </thead>
    <tbody>
{% for item in site.data.dashboards.overview %}
      <tr class="">
        <td class="metric">{{item.title}}</td>
        <td class="health">
          {%- assign color = "warning" -%}
          {%- assign state = "Caution" -%}
          {%- if item.health >= 80 -%}
            {%- assign color = "success" -%}
            {%- assign state = "Great" -%}
          {%- elsif item.health < 50 -%}
            {%- assign color = "danger" -%}
            {%- assign state = "Danger" -%}
          {%- endif -%}
          <div class="progress position-relative" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="true" data-bs-original-title="
              <div class=&quot;progress-tooltip text-capitalize text-start&quot;>
                <div class=&quot;mb-1 pb-1 text-center border-bottom border-secondary&quot;>
                  Status:<br>{{item.health}}% ({{state}})
                </div>
                <div class=&quot;d-flex justify-content-between&quot;>
                  <span class=&quot;me-2&quot;>danger:</span><span>0-50%</span>
                </div>
                <div class=&quot;d-flex justify-content-between&quot;>
                  <span class=&quot;me-2&quot;>caution:</span><span>50-80%</span>
                </div>
                <div class=&quot;d-flex justify-content-between mb-1 pb-1 border-bottom border-secondary&quot;>
                <span class=&quot;me-2&quot;>great:</span><span>80-100%</span>
                </div>
                
              </div>">
            <div class="progress-bar position-absolute bg-{{color}}" role="progressbar" style="width: {{item.health}}%;" aria-valuenow="{{item.health}}" aria-valuemin="0" aria-valuemax="100"></div>
            <div class="progress-bar bg-trans progress-danger" role="progressbar" style="width: 50%;"></div>
            <div class="progress-bar bg-trans progress-warning" role="progressbar" style="width: 30%;"></div>
            <div class="progress-bar bg-trans progress-success" role="progressbar" style="width: 20%;"></div>
          </div>
        </td>
        <td class="details">
          {%- if item.link -%}
            <a href="{{item.link}}" class="btn btn-sm btn-primary">View Details</a>
          {%- else -%}
            no details
          {%- endif -%}
        </td>
      </tr>
{% endfor %}
    </tbody>
  </table>
</div>
{%- endcapture -%}


{% include components/card-text.html
  title="Health"
  body=content
%}
